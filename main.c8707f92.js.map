{"version":3,"sources":["scripts/main.js"],"names":["thead","document","querySelector","tbody","sortTargetInnerText","sortDirection","addEventListener","eventClick","cellIndex","target","trArray","children","innerText","dataset","clicked","arraySorted","sort","a","b","first","replace","second","isNaN","localeCompare","append","active","classList","remove","closest","add","newEmployeeForm","createElement","className","innerHTML","body","saveButton","preventDefault","addNewField","querySelectorAll","newRow","value","length","pushNotification","forEach","item","newTd","name","insertAdjacentHTML","posTop","posRight","title","description","type","messageInfo","style","top","right","qa","setTimeout","tdChange","tdInnerText","theadInnerText","firstElementChild","toLowerCase","matches","newInput","focus","eventKey","key","blur"],"mappings":"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","file":"main.c8707f92.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst thead = document.querySelector('thead');\nconst tbody = document.querySelector('tbody');\nlet sortTargetInnerText = '';\nlet sortDirection = 1;\n\n// 1. sorting\nthead.addEventListener('click', (eventClick) => {\n  const cellIndex = eventClick.target.cellIndex;\n  const trArray = [...tbody.children];\n\n  if (sortTargetInnerText !== eventClick.target.innerText) {\n    sortDirection = 1;\n  };\n\n  eventClick.target.dataset.clicked = eventClick.target.innerText;\n\n  const arraySorted = trArray.sort((a, b) => {\n    const first = a.children[cellIndex].innerText.replace(/[$,]/g, '');\n    const second = b.children[cellIndex].innerText.replace(/[$,]/g, '');\n\n    if (isNaN(first)) {\n      return sortDirection * first.localeCompare(second);\n    } else {\n      return sortDirection * (second - first);\n    };\n  });\n\n  if (sortDirection === 1) {\n    sortDirection = -1;\n  } else {\n    sortDirection = 1;\n  };\n\n  sortTargetInnerText = eventClick.target.innerText;\n\n  tbody.append(...arraySorted);\n});\n\n// 2. selected row\ntbody.addEventListener('click', eventClick => {\n  const active = tbody.querySelector('.active');\n\n  if (active) {\n    active.classList.remove('active');\n  };\n\n  eventClick.target.closest('tr').classList.remove('active');\n  eventClick.target.closest('tr').classList.add('active');\n});\n\n// 3. add a form\nconst newEmployeeForm = document.createElement('form');\n\nnewEmployeeForm.className = 'new-employee-form';\n\nnewEmployeeForm.innerHTML = `\n  <form class=\"new-employee-form\" action=\"/\" method=\"post\">\n    <label>\n      Name:\n      <input name=\"name\" type=\"text\" data-qa=\"name\" required>\n    </label>\n    <label>\n      Position:\n      <input name=\"position\" type=\"text\" data-qa=\"position\" required>\n    </label>\n    <label>\n      Office:\n      <select name=\"office\" data-qa=\"office\">\n        <option value=\"Tokyo\">Tokyo</option>\n        <option value=\"Singapore\">Singapore</option>\n        <option value=\"London\">London</option>\n        <option value=\"New York\">New York</option>\n        <option value=\"Edinburgh\">Edinburgh</option>\n        <option value=\"San Francisco\">San Francisco</option>\n      </select>\n    </label>\n    <label>\n      Age:\n      <input name=\"age\" type=\"number\" data-qa=\"age\" required>\n    </label>\n    <label>\n      Salary:\n      <input name=\"salary\" type=\"number\" data-qa=\"salary\" required>\n    </label>\n    <button>Save to table</button>\n  </form>\n`;\n\ndocument.body.append(newEmployeeForm);\n\n// 4. add a new employee to the table\nconst saveButton = document.querySelector('button');\n\nsaveButton.addEventListener('click', (eventClick) => {\n  eventClick.preventDefault();\n\n  const addNewField = document.querySelectorAll('[data-qa]');\n  const newRow = document.createElement('tr');\n\n  if (addNewField[0].value.length < 4) {\n    pushNotification(10, 10, 'Error',\n      'Name must be at least 4 letters', 'error');\n\n    return;\n  };\n\n  if (addNewField[3].value < 18 || addNewField[3].value > 90) {\n    pushNotification(10, 10, 'Error',\n      'Age can\\'t be less than 18 or more than 90', 'error');\n\n    return;\n  };\n\n  addNewField.forEach(item => {\n    let newTd = item.value;\n\n    if (item.name === 'salary') {\n      newTd = '$' + item.value.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n    };\n\n    newRow.insertAdjacentHTML('beforeend', `\n    <td>${newTd}</td>\n  `);\n\n    if (item.name === 'office') {\n      item.value = newEmployeeForm[2].children[0].value;\n    } else {\n      item.value = '';\n    };\n  });\n\n  tbody.append(newRow);\n\n  pushNotification(10, 10, 'Congratulations',\n    'Employee has been added successfully!', 'success');\n});\n\nconst pushNotification = (posTop, posRight, title, description, type) => {\n  const body = document.querySelector('body');\n  const messageInfo = document.createElement('div');\n\n  messageInfo.style.top = `${posTop}px`;\n  messageInfo.style.right = `${posRight}px`;\n  messageInfo.className = `notification ${type}`;\n  messageInfo.dataset.qa = `notification`;\n\n  messageInfo.insertAdjacentHTML('afterbegin', `\n    <h2 class=\"title\">${title}</h2>\n    <p>${description}</p>\n  `);\n\n  body.append(messageInfo);\n\n  setTimeout(() => {\n    messageInfo.remove();\n  }, 2000);\n};\n\n// 5. Editing of table cells by double-clicking\ntbody.addEventListener('dblclick', (eventClick) => {\n  const tdChange = eventClick.target;\n  const tdInnerText = tdChange.innerText;\n  const cellIndex = eventClick.target.cellIndex;\n  const theadInnerText = thead.firstElementChild.children[cellIndex]\n    .innerHTML.toLowerCase();\n\n  if (!tdChange.matches('TD')) {\n    return;\n  };\n\n  const newInput = cellIndex === 2\n    ? document.createElement('select')\n    : document.createElement('input');\n\n  newInput.className = 'cell-input';\n\n  newInput.name = `${theadInnerText}`;\n  newInput.dataset.qa = `${theadInnerText}`;\n  newInput.value = eventClick.target.innerText;\n\n  switch (cellIndex) {\n    case 0:\n    case 1:\n      newInput.type = 'text';\n      newInput.name = `${theadInnerText}`;\n      newInput.dataset.qa = `${theadInnerText}`;\n      break;\n\n    case 2:\n      newInput.name = `${theadInnerText}`;\n      newInput.dataset.qa = `${theadInnerText}`;\n\n      newInput.insertAdjacentHTML('afterbegin', `\n        <option value=\"Tokyo\">Tokyo</option>\n        <option value=\"Singapore\">Singapore</option>\n        <option value=\"London\">London</option>\n        <option value=\"New York\">New York</option>\n        <option value=\"Edinburgh\">Edinburgh</option>\n        <option value=\"San Francisco\">San Francisco</option>\n      `);\n      break;\n\n    case 3:\n      newInput.name = `${theadInnerText}`;\n      newInput.dataset.qa = `${theadInnerText}`;\n      newInput.type = 'number';\n      break;\n\n    case 4:\n      newInput.name = `${theadInnerText}`;\n      newInput.dataset.qa = `${theadInnerText}`;\n      newInput.type = 'number';\n      break;\n  };\n  eventClick.target.innerText = '';\n  tdChange.append(newInput);\n\n  newInput.focus();\n\n  newInput.addEventListener('keydown', (eventKey) => {\n    if (eventKey.key === 'Enter') {\n      newInput.blur();\n    };\n  });\n\n  newInput.addEventListener('blur', () => {\n    if (newInput.value.length === 0) {\n      pushNotification(10, 10, 'Error',\n        'Name must be at least 4 letters', 'error');\n      eventClick.target.innerText = tdInnerText;\n    } else if (cellIndex === 0 && newInput.value.length < 4) {\n      pushNotification(10, 10, 'Error',\n        'Name must be at least 4 letters', 'error');\n      eventClick.target.innerText = tdInnerText;\n    } else if (cellIndex === 3 && (newInput.value < 18\n      || newInput.value > 90)) {\n      pushNotification(10, 10, 'Error',\n        'Age can\\'t be less than 18 or more than 90', 'error');\n      eventClick.target.innerText = tdInnerText;\n    } else {\n      eventClick.target.innerText = newInput.value;\n\n      pushNotification(10, 10, 'Congratulations',\n        'Employee has been changed successfully!', 'success');\n    }\n\n    newInput.remove();\n  });\n});\n"]}